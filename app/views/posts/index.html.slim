= turbo_stream_from 'tweet_page'
= turbo_stream_from current_user

#posts data-controller="posts"
  = render partial: 'posts/post', collection: @posts, locals: { user: current_user }

div id="tweet-form" class="fixed bottom-0 w-full" data-controller="posts error-messages"
  = form_with model: Post.new, \
              data: { action: "turbo:submit-end->posts#clearForm turbo:submit-start->error-messages#clearErrorMessages" }, \
              class: %w[w-full max-w-2xl px-6 py-4 mx-auto bg-white/75 rounded-md shadow-md dark:bg-gray-800] \
              do |f|

    = render 'shared/error_messages', object: f.object

    = render 'chaplus_api/message', bot_message: 'こんにちは！'

    .flex
      = f.text_area :message, class: %w[block w-full px-4 py-2 text-gray-700 bg-white/75 border rounded-md \
                                        dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 \
                                        dark:focus:border-blue-300 focus:outline-none focus:ring focus:ring-blue-300 \
                                        focus:ring-opacity-40 resize-none]
      = f.submit 'つぶやく', class: %w[text-white transition-colors duration-200 transform bg-gray-700 \
                                      rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600 block mx-auto]

css:
  /* つぶやきを泡のように出現、消滅させる */
  @keyframes tweet-bubble {
      0% {
          opacity: .5;
          transform: translateY(80vh);
      }
      80% {
          opacity: 1;
          transform: translateY(20vh);
      }
      100% {
          opacity: 0;
          transform: translateY(0px);
      }
  }